brep.py - Browse miner reports
==============================

Copyright (C) 2021 Linzhi Ltd.

This work is licensed under the terms of the MIT License.
A copy of the license can be found in the file COPYING.txt


brep.py is a browser for reports (System > Reports) generated by miners. To
examine a set of reports, run brep.py as follows:

brep.py --url URL-OF-WEB-UI-FILES report.zip ...

The URL can either point to a miner (http://miner/) or to a local copy of the
files (see below).

The display is divided into three columns:

- The left column lists the report files. The report to view can be selected by
  clicking on it.

- The middle column has a "Browser" button on top, and then lists the files
  contained in the report.

- The right column shows the browser view or the file content.

The browser view is created by loading the code of the Web interface and then
replaying the MQTT messages recorded in the report. The (Web) browser view
responds to user input (e.g., to select pages or tabs) but does not send any
MQTT messages.


Caching the Web UI files locally
--------------------------------

brep.py currently downloads the Web UI each time the Browser display is
selected. If using a remote source, this can be very slow. To speed things up,
a local copy of the interface code may be used:

wget -p http://miner/ -nH -P directory/
brep.py --url file://`pwd`/directory/index.html report.zip ...


Known issues
------------

- There should be a text search function.

- Each time we switch to the browser view, the browser is re-initialized, which
  can be slow.

- If the firmware by which a report was generated is different from the
  firmware whose Web UI is used, any API differences between the two versions
  may cause anomalies.

- Many absolute time indications will be based on the time of viewing, not the
  time the report was taken. (The miner uses relative times for almost
  everything.)
